teams_ids[team_code %like% "lakers",current_team_id := "LAL"]
teams_ids[team_code %like% "magic",current_team_id := "ORL"]
teams_ids[team_code %like% "mavericks",current_team_id := "DAL"]
teams_ids[team_code %like% "nets",current_team_id := "BRK"]
teams_ids[team_code %like% "nuggets",current_team_id := "DEN"]
teams_ids[team_code %like% "pacers",current_team_id := "IND"]
teams_ids[team_code %like% "pelicans",current_team_id := "NOP"]
teams_ids[team_code %like% "pistons",current_team_id := "DET"]
teams_ids[team_code %like% "raptors",current_team_id := "TOR"]
teams_ids[team_code %like% "rockets",current_team_id := "HOU"]
teams_ids[team_code %like% "sixers",current_team_id := "PHL"]
teams_ids[team_code %like% "spurs",current_team_id := "SAS"]
teams_ids[team_code %like% "suns",current_team_id := "PHO"]
teams_ids[team_code %like% "timberwolves",current_team_id := "MIN"]
teams_ids[team_code %like% "thunder",current_team_id := "OKC"]
teams_ids[team_code %like% "warriors",current_team_id := "GSW"]
View(teams_ids)
teams_ids %>>% data.frame %>>%
dbWriteTable(conn = con,name = 'nba_team_ids',row.names = F)
all_ids %>>% left_join(teams_ids)
all_ids %>>% left_join(teams_ids) -> ds
View(ds)
ds %>>% data.frame %>>%
dbWriteTable(conn = con, name = 'data_nba_player_ids',row.names = F, overwrite = T)
update.packages()
c("jsonlite","dplyr",'reshape2','pipeR') -> packages
lapply(packages,library, character.only = T)
getNBARookieSophomoreData <- function(season_end = 2015, table_name = "Per Game", player_season = "Rookies", season_type = "Regular Season", scrape_time = F){
"http://stats.nba.com/stats/commonplayerinfo?LeagueID=00&PlayerID=" -> stats_stem
"http://stats.nba.com/media/players/230x185/" -> photo_stem
"http://stats.nba.com/media/img/teams/logos/" -> logo_stem
season_type %>>% (gsub('\\ ','+',.)) -> st
table_name %>>% (gsub('\\ ','',.)) -> tn
substr(season_end,start = 3,4) %>>%
(paste((season_end-1)
%>>% as.character(),.,sep = "-")) -> s
"http://stats.nba.com/stats/leagueleaders?LeagueID=00&PerMode=" -> nba_stem
nba_stem %>>% paste0(tn,"&Scope=",player_season,"&Season=",s,
"&SeasonType=",st,"&StatCategory=PTS") -> nba_json_url
pipeline({
nba_json_url
fromJSON(simplifyDataFrame = T)
}) -> df
df$resultSet$headers %>>% tolower() -> headers
'team_id' -> headers[headers %in% 'team']
df$resultSet$rowSet %>>% data.frame() %>>% tbl_df -> data
headers -> names(data)
apply(data[,!names(data) %in% c('player','team_id')],2,as.numeric) ->
data[,!names(data) %in% c('player','team_id')]
season_end -> data$season_end
table_name -> data$table_name
season_type -> data$season_type
player_season -> data$player_season
stats_stem %>>% paste0(data$player_id) -> data$nba_stats_url
photo_stem %>>% paste0(data$player_id,".png") -> data$nba_player_imageURL
logo_stem %>>% paste0(data$team_id,"_logo.svg") -> data$nba_team_imageURL
nba_json_url -> data$nba_jsonURL
if(scrape_time == T){
Sys.time() -> data$scrape_time
}
data$rank <- NULL
return(data)
}
getNBARookieSophomoreData(2015)
getNBARookieSophomoreData(2015) -> data15
View(data15)
getNBARookieSophomoreData(2015,table_name = 'Totals') -> data15
View(data15)
devtools::install_github("Rdatatable/data.table")
remove.packages("data.table", lib="~/Library/R/3.1/library")
devtools::install_github("Rdatatable/data.table")
devtools::install_github("swirldev/swirl_courses")
update.packages()
detach("package:dplyr", unload=TRUE)
library("dplyr", lib.loc="~/Library/R/3.1/library")
c('pipeR','dplyr','RPostgreSQL','qtlcharts') -> packages
lapply(packages,library,character.only = T)
dbConnect(PostgreSQL(), user = "alexbresler", dbname = "nba") -> con
pipeline({
dbReadTable(conn = con,"data_historic_player_per_game")
data.frame
tbl_df
~all_per_game
})
source('Desktop/Github/blog_code/nba/functions/getNBARookieSophmoreData.R')
getNBARookieSophomoreData(season_end = 2015, player_season = "S",scrape_time = T) -> data2015
all_per_game %>>% rbind_list(data2015) -> all_per_game
pipeline({
dbReadTable(conn = con,"data_nba_player_ids")
data.frame
tbl_df
~player_ids
})
all_per_game %>>% merge(player_ids[,c('player','player_id','position','height_inches','weight_lbs','from_year','bmi')]) -> ds
(ds$season_end - ds$from_year) -> ds$season_number
NULL -> ds$from_year
ds$season_end %>>%
cut(breaks = c(0,1959,1969,1979,1989,1999,2009,2015), labels = c(1:7)) -> decades
F -> use_scale
if(use_scale == T){
pipeline({
ds
select(min:pts,height_inches:season_number)
scale
~plot_ds
#iplotCorr(reorder = T)
})
} else{
pipeline({
ds
select(min:pts,height_inches:season_number)
~plot_ds
})
}
detail <-
sprintf("<table><tbody><tr><td><span style='font-size:10px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><img src='%1$s' height= '50px', width = '62.16px'></span></span></td><td style='text-align: center;'><span style='font-size:12px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><strong>Player:</strong> %2$s<br><strong>Team:</strong> %3$s<br><strong>Season:</strong> %4$s<br><strong>Position:</strong> %5$s<br><strong>Season Number:</strong> %6$s</span></td></tr></tbody></table>",
ds$nba_player_imageURL,
ds$player,
ds$team,
paste0(
as.numeric(ds$season_end)-1,"-",as.numeric(ds$season_end)
),
ds$position,
ds$season_number
)
detail -> row.names(plot_ds)
data.frame(position = ds$position %>>% unique)
data.frame(position = ds$position %>>% unique) -> pos_col
c( "#AA66cc", "#FF4444" , "#000000","#1d2098",'#00fc00','#ffda4e','#00beff',
'#bdbdbd') -> pos_col$color
ds$position %>>% factor -> postions
plot_ds %>>% (iplotCorr(.,postions,digits = 4,onefile = T,
reorder = T,title="NBA Per Game Data Correlation Matrix<br>Colored by Position<br>1951-2014 End of Season Data, 2015 Data Through 11/20/14<br><a href = 'http://stats.nba.com' target ='_blank'>Data Source</a>",
chartOpts=list(scatcolors=pos_col$color,
rectcolor = "#ffffff",
cortitle="Correlation matrix",
scattitle="Scatterplot"
)))
View(plot_ds)
postions
library(qtlcharts)
setwd("/Users/alexbresler/Desktop/Github/blog_code/nba/posts/team_qtl")
'all_data.csv' %>>% read.csv() %>>% tbl_df -> df
read.csv('column_names.csv') %>>% data.frame() -> col_names
df$season %>>% (colsplit(.,'\\-',c('a','season'))) %>>% (.$season) -> df$season_end
df$season_end %>>%
cut(breaks = c(0,1959,1969,1979,1989,1999,2009,2015), labels = c(1:7)) -> decades
df %>>%
filter(!is.na(bref_team_id)) -> df
teams_ids[,c(4:5)] -> tc
1:nrow(tc) -> tc$bref_id
merge(df, tc, by = c('bref_team_id','color')) -> df
tc$bref_team_id = NULL
setwd("/Users/alexbresler/Desktop/Github/blog_code/nba/posts/team_qtl")
'all_data.csv' %>>% read.csv() %>>% tbl_df -> df
read.csv('column_names.csv') %>>% data.frame() -> col_names
'teams_logos.csv' %>>% read.csv() -> tc
View(tc)
'teams_logos_colors.csv' %>>% read.csv() -> tc
View(tc)
df$season %>>% (colsplit(.,'\\-',c('a','season'))) %>>% (.$season) -> df$season_end
df$season_end %>>%
cut(breaks = c(0,1959,1969,1979,1989,1999,2009,2015), labels = c(1:7)) -> decades
df %>>%
filter(!is.na(bref_team_id)) -> df
teams_ids[,c(4:5)] -> tc
1:nrow(tc) -> tc$bref_id
merge(df, tc, by = c('bref_team_id','color')) -> df
'teams_logos_colors.csv' %>>% read.csv() -> teams_ids
df$season %>>% (colsplit(.,'\\-',c('a','season'))) %>>% (.$season) -> df$season_end
df$season_end %>>%
cut(breaks = c(0,1959,1969,1979,1989,1999,2009,2015), labels = c(1:7)) -> decades
df %>>%
filter(!is.na(bref_team_id)) -> df
teams_ids[,c(4:5)] -> tc
1:nrow(tc) -> tc$bref_id
merge(df, tc, by = c('bref_team_id','color')) -> df
View(df)
setwd("/Users/alexbresler/Desktop/Github/blog_code/nba/posts/team_qtl")
'all_data.csv' %>>% read.csv() %>>% tbl_df -> df
read.csv('column_names.csv') %>>% data.frame() -> col_names
'teams_logos_colors.csv' %>>% read.csv() -> teams_ids
df$season %>>% (colsplit(.,'\\-',c('a','season'))) %>>% (.$season) -> df$season_end
df$season_end %>>%
cut(breaks = c(0,1959,1969,1979,1989,1999,2009,2015), labels = c(1:7)) -> decades
df %>>%
filter(!is.na(bref_team_id)) -> df
teams_ids[,c(4:5)] -> tc
1:nrow(tc) -> tc$bref_id
merge(df, tc, by = c('bref_team_id','color')) -> df
View(df)
tc$bref_team_id = NULL
detail <-
sprintf("<table><tbody><tr><td><span style='font-size:10px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><img src='%1$s' height= '100px', width = '100px'></span></span></td><td style='text-align: center;'><span style='font-size:12px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><strong>Team:</strong> %2$s<br><strong>Conference:</strong> %3$s<br><strong>Season:</strong> %4$s<br><strong>Win Percentage:</strong> %5$s<br><strong>Wins:</strong> %6$s</span></td></tr></tbody></table>",
df$nba_team_imageURL,
df$team,
df$conference,
paste0(
as.numeric(df$season_end)-1,"-",as.numeric(df$season_end)
),
df$win_pct,
df$wins
)
col_names$column_name -> names(df)
T -> use_scale
if(use_scale == T){
pipeline({
df
select(-arena,-Season,-team,-bref_team_season_url,-bref_team_id_current,-Conference,-nba_team_imageURL,-color,-bref_team_id,-season,-points,-bref_id)
scale()
~plot_ds
})
} else{
pipeline({
df
select(-arena,-Season,-team,-bref_team_season_url,-bref_team_id_current,-Conference,-nba_team_imageURL,-color,-bref_team_id,-points,-bref_id)
~plot_ds
})
}
detail -> rownames(plot_ds)
df$bref_id %>>% factor
df$bref_id %>>% factor -> ids
plot_ds %>>% (iplotCorr(mat = .,ids digits = 4,onefile = T,
reorder = T,title="NBA Per Game Data Correlation Matrix<br>Colored by Position<br>1951-2014 End of Season Data, 2015 Data Through 11/20/14<br><a href = 'http://stats.nba.com' target ='_blank'>Data Source</a>",
chartOpts=list(scatcolors=tc$color,
rectcolor = "#ffffff",
cortitle="Correlation Matrix",
scattitle="Scatterplot"
)))
plot_ds %>>% (iplotCorr(mat = .,ids, digits = 4,onefile = T,
reorder = T,title="NBA Per Game Data Correlation Matrix<br>Colored by Position<br>1951-2014 End of Season Data, 2015 Data Through 11/20/14<br><a href = 'http://stats.nba.com' target ='_blank'>Data Source</a>",
chartOpts=list(scatcolors=tc$color,
rectcolor = "#ffffff",
cortitle="Correlation Matrix",
scattitle="Scatterplot"
)))
View(teams_ids)
teams_ids$bref_team_id_current %>>% unique
View(teams_ids)
teams_ids[,c('bref_team_id_current','team')]
teams_ids$bref_team_id %in% teams_ids$bref_team_id_current
teams[teams_ids$bref_team_id %in% teams_ids$bref_team_id_current,]
teams_ids[teams_ids$bref_team_id %in% teams_ids$bref_team_id_current,]
teams_ids[teams_ids$bref_team_id %in% teams_ids$bref_team_id_current,c('team','bref_team_id_current')]
teams_ids[teams_ids$bref_team_id %in% teams_ids$bref_team_id_current,c('team','bref_team_id_current')] -> active
names(active)
'current_team' -> names(active)[1]
View(active)
row.names(active)
row.names(active) = NULL
setwd("/Users/alexbresler/Desktop/Github/blog_code/nba/posts/team_qtl")
'all_data.csv' %>>% read.csv() %>>% tbl_df -> df
View(df)
merge(df,active)
merge(df,active) -> df2
df2 %>>% write.csv('all_data.csv',row.names = F)
library(qtlcharts)
setwd("/Users/alexbresler/Desktop/Github/blog_code/nba/posts/team_qtl")
'all_data.csv' %>>% read.csv() %>>% tbl_df -> df
rm(df2)
read.csv('column_names.csv') %>>% data.frame() -> col_names
'teams_logos_colors.csv' %>>% read.csv() -> teams_ids
df$season %>>% (colsplit(.,'\\-',c('a','season'))) %>>% (.$season) -> df$season_end
df$season_end %>>%
cut(breaks = c(0,1959,1969,1979,1989,1999,2009,2015), labels = c(1:7)) -> decades
df %>>%
filter(!is.na(bref_team_id)) -> df
teams_ids[,c(4:5)] -> tc
1:nrow(tc) -> tc$bref_id
merge(df, tc, by = c('bref_team_id','color')) -> df
tc$bref_team_id = NULL
sprintf("<table><tbody><tr><td><span style='font-size:10px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><img src='%1$s' height= '100px', width = '100px'></span></span></td><td style='text-align: center;'><span style='font-size:12px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><strong>Team:</strong> %2$s<br><strong>Current Team:</strong> %7$s<br><strong>Conference:</strong> %3$s<br><strong>Season:</strong> %4$s<br><strong>Win Percentage:</strong> %5$s<br><strong>Wins:</strong> %6$s</span></td></tr></tbody></table>",
df$nba_team_imageURL,
df$team,
df$conference,
paste0(
as.numeric(df$season_end)-1,"-",as.numeric(df$season_end)
),
df$win_pct,
df$wins,
df$current_team
) %>>% head
detail <-
sprintf("<table><tbody><tr><td><span style='font-size:10px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><img src='%1$s' height= '100px', width = '100px'></span></span></td><td style='text-align: center;'><span style='font-size:12px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><strong>Team:</strong> %2$s<br><strong>Current Team:</strong> %7$s<br><strong>Conference:</strong> %3$s<br><strong>Season:</strong> %4$s<br><strong>Win Percentage:</strong> %5$s<br><strong>Wins:</strong> %6$s</span></td></tr></tbody></table>",
df$nba_team_imageURL,
df$team,
df$conference,
paste0(
as.numeric(df$season_end)-1,"-",as.numeric(df$season_end)
),
df$win_pct,
df$wins,
df$current_team
)
col_names$column_name -> names(df)
F -> use_scale
if(use_scale == T){
pipeline({
df
select(-arena,-Season,-team,-bref_team_season_url,-bref_team_id_current,-Conference,-nba_team_imageURL,-color,-bref_team_id,-season,-points,-bref_id,-current_team)
scale()
~plot_ds
})
} else{
pipeline({
df
select(-arena,-Season,-team,-bref_team_season_url,-bref_team_id_current,-Conference,-nba_team_imageURL,-color,-bref_team_id,-points,-bref_id,-current_team)
~plot_ds
})
}
detail -> rownames(plot_ds)
df$bref_id %>>% factor -> ids
plot_ds %>>% (iplotCorr(mat = .,ids, digits = 4,onefile = T,
reorder = T,title="NBA Per Game Data Correlation Matrix<br>Colored by Position<br>1951-2014 End of Season Data, 2015 Data Through 11/20/14<br><a href = 'http://stats.nba.com' target ='_blank'>Data Source</a>",
chartOpts=list(scatcolors=tc$color,
rectcolor = "#ffffff",
cortitle="Correlation Matrix",
scattitle="Scatterplot"
)))
'all_data.csv' %>>% read.csv() %>>% tbl_df -> df
View(df)
df %>>%
filter(current_team == 'Boston Celtics') %>>%
select(nba_team_imageURL) %>>% unique
'teams_logos_colors.csv' %>>% read.csv() -> teams_ids
df$nba_team_imageURL = NULL
teams_ids %>>% merge(df) -> df2
teams_ids %>>% merge(df) -> df
read.csv('column_names.csv') %>>% data.frame() -> col_names
'teams_logos_colors.csv' %>>% read.csv() -> teams_ids
'all_data.csv' %>>% read.csv() %>>% tbl_df -> df
read.csv('column_names.csv') %>>% data.frame() -> col_names
'teams_logos_colors.csv' %>>% read.csv() -> teams_ids
df$nba_team_imageURL = NULL
teams_ids %>>% merge(df) -> df
df$season %>>% (colsplit(.,'\\-',c('a','season'))) %>>% (.$season) -> df$season_end
df$season_end %>>%
cut(breaks = c(0,1959,1969,1979,1989,1999,2009,2015), labels = c(1:7)) -> decades
df %>>%
filter(!is.na(bref_team_id)) -> df
teams_ids[,c(4:5)] -> tc
1:nrow(tc) -> tc$bref_id
merge(df, tc, by = c('bref_team_id','color')) -> df
tc$bref_team_id = NULL
detail <-
sprintf("<table><tbody><tr><td><span style='font-size:10px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><img src='%1$s' height= '100px', width = '100px'></span></span></td><td style='text-align: center;'><span style='font-size:12px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><strong>Team:</strong> %2$s<br><strong>Current Team:</strong> %7$s<br><strong>Conference:</strong> %3$s<br><strong>Season:</strong> %4$s<br><strong>Win Percentage:</strong> %5$s<br><strong>Wins:</strong> %6$s</span></td></tr></tbody></table>",
df$nba_team_imageURL,
df$team,
df$conference,
paste0(
as.numeric(df$season_end)-1,"-",as.numeric(df$season_end)
),
df$win_pct,
df$wins,
df$current_team
)
col_names$column_name -> names(df)
F -> use_scale
if(use_scale == T){
pipeline({
df
select(-arena,-Season,-team,-bref_team_season_url,-bref_team_id_current,-Conference,-nba_team_imageURL,-color,-bref_team_id,-season,-points,-bref_id,-current_team)
scale()
~plot_ds
})
} else{
pipeline({
df
select(-arena,-Season,-team,-bref_team_season_url,-bref_team_id_current,-Conference,-nba_team_imageURL,-color,-bref_team_id,-points,-bref_id,-current_team)
~plot_ds
})
}
detail -> rownames(plot_ds)
df$bref_id %>>% factor -> ids
plot_ds %>>% (iplotCorr(mat = .,ids, digits = 4,onefile = T,
reorder = T,title="NBA Per Game Data Correlation Matrix<br>Colored by Position<br>1951-2014 End of Season Data, 2015 Data Through 11/20/14<br><a href = 'http://stats.nba.com' target ='_blank'>Data Source</a>",
chartOpts=list(scatcolors=tc$color,
rectcolor = "#ffffff",
cortitle="Correlation Matrix",
scattitle="Scatterplot"
)))
'all_data.csv' %>>% read.csv() %>>% tbl_df -> df
read.csv('column_names.csv') %>>% data.frame() -> col_names
'teams_logos_colors.csv' %>>% read.csv() -> teams_ids
df$nba_team_imageURL = NULL
teams_ids %>>% merge(df) -> df
df$season %>>% (colsplit(.,'\\-',c('a','season'))) %>>% (.$season) -> df$season_end
View(df)
teams_ids[,c(4:5)] -> tc
View(tc)
tc$bref_team_id = NULL
detail <-
sprintf("<table><tbody><tr><td><span style='font-size:10px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><img src='%1$s' height= '100px', width = '100px'></span></span></td><td style='text-align: center;'><span style='font-size:12px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><strong>Team:</strong> %2$s<br><strong>Current Team:</strong> %7$s<br><strong>Conference:</strong> %3$s<br><strong>Season:</strong> %4$s<br><strong>Win Percentage:</strong> %5$s<br><strong>Wins:</strong> %6$s</span></td></tr></tbody></table>",
df$nba_team_imageURL,
df$team,
df$conference,
paste0(
as.numeric(df$season_end)-1,"-",as.numeric(df$season_end)
),
df$win_pct,
df$wins,
df$current_team
)
col_names$column_name -> names(df)
F -> use_scale
if(use_scale == T){
'all_data.csv' %>>% read.csv() %>>% tbl_df -> df
read.csv('column_names.csv') %>>% data.frame() -> col_names
'teams_logos_colors.csv' %>>% read.csv() -> teams_ids
df$nba_team_imageURL = NULL
teams_ids %>>% merge(df) -> df
'all_data.csv' %>>% read.csv() %>>% tbl_df -> df
read.csv('column_names.csv') %>>% data.frame() -> col_names
'teams_logos_colors.csv' %>>% read.csv() -> teams_ids
df$nba_team_imageURL = NULL
teams_ids %>>% merge(df) -> df
df$season %>>% (colsplit(.,'\\-',c('a','season'))) %>>% (.$season) -> df$season_end
df$season_end %>>%
cut(breaks = c(0,1959,1969,1979,1989,1999,2009,2015), labels = c(1:7)) -> decades
df %>>%
filter(!is.na(bref_team_id)) -> df
teams_ids[,c(4:5)] -> tc
tc$bref_team_id = NULL
detail <-
sprintf("<table><tbody><tr><td><span style='font-size:10px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><img src='%1$s' height= '100px', width = '100px'></span></span></td><td style='text-align: center;'><span style='font-size:12px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><strong>Team:</strong> %2$s<br><strong>Current Team:</strong> %7$s<br><strong>Conference:</strong> %3$s<br><strong>Season:</strong> %4$s<br><strong>Win Percentage:</strong> %5$s<br><strong>Wins:</strong> %6$s</span></td></tr></tbody></table>",
df$nba_team_imageURL,
df$team,
df$conference,
paste0(
as.numeric(df$season_end)-1,"-",as.numeric(df$season_end)
),
df$win_pct,
df$wins,
df$current_team
)
col_names$column_name -> names(df)
F -> use_scale
if(use_scale == T){
pipeline({
df
select(-arena,-Season,-team,-bref_team_season_url,-bref_team_id_current,-Conference,-nba_team_imageURL,-color,-bref_team_id,-season,-points,-bref_id,-current_team)
scale()
~plot_ds
})
} else{
pipeline({
df
select(-arena,-Season,-team,-bref_team_season_url,-bref_team_id_current,-Conference,-nba_team_imageURL,-color,-bref_team_id,-points,-bref_id,-current_team)
~plot_ds
})
}
detail -> rownames(plot_ds)
View(col_names)
setwd("/Users/alexbresler/Desktop/Github/blog_code/nba/posts/team_qtl")
'all_data.csv' %>>% read.csv() %>>% tbl_df -> df
read.csv('column_names.csv') %>>% data.frame() -> col_names
'teams_logos_colors.csv' %>>% read.csv() -> teams_ids
df$nba_team_imageURL = NULL
teams_ids %>>% merge(df) -> df
df$season %>>% (colsplit(.,'\\-',c('a','season'))) %>>% (.$season) -> df$season_end
df$season_end %>>%
cut(breaks = c(0,1959,1969,1979,1989,1999,2009,2015), labels = c(1:7)) -> decades
df %>>%
filter(!is.na(bref_team_id)) -> df
teams_ids[,c(4:5)] -> tc
tc$bref_team_id = NULL
detail <-
sprintf("<table><tbody><tr><td><span style='font-size:10px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><img src='%1$s' height= '100px', width = '100px'></span></span></td><td style='text-align: center;'><span style='font-size:12px;'><span style='font-family:lucida sans unicode,lucida grande,sans-serif;'><strong>Team:</strong> %2$s<br><strong>Current Team:</strong> %7$s<br><strong>Conference:</strong> %3$s<br><strong>Season:</strong> %4$s<br><strong>Win Percentage:</strong> %5$s<br><strong>Wins:</strong> %6$s</span></td></tr></tbody></table>",
df$nba_team_imageURL,
df$team,
df$conference,
paste0(
as.numeric(df$season_end)-1,"-",as.numeric(df$season_end)
),
df$win_pct,
df$wins,
df$current_team
)
col_names$column_name
names(df)
col_names$column_name -> names(df)
View(col_names)
col_names$column_name -> names(df)
F -> use_scale
if(use_scale == T){
pipeline({
df
select(-arena,-Season,-team,-bref_team_season_url,-bref_team_id_current,-Conference,-nba_team_imageURL,-color,-bref_team_id,-season,-points,-current_team)
scale()
~plot_ds
})
} else{
pipeline({
df
select(-arena,-Season,-team,-bref_team_season_url,-bref_team_id_current,-Conference,-nba_team_imageURL,-color,-bref_team_id,-points,-current_team)
~plot_ds
})
}
detail -> rownames(plot_ds)
View(tc)
teams_ids[,c(4:5)] -> tc
View(tc)
df$bref_team_id
df$bref_team_id_current
df$bref_team_id_current %>>% factor -> ids
plot_ds %>>% (iplotCorr(mat = .,ids, digits = 4,onefile = T,
reorder = T,title="NBA Per Game Data Correlation Matrix<br>Colored by Position<br>1951-2014 End of Season Data, 2015 Data Through 11/20/14<br><a href = 'http://stats.nba.com' target ='_blank'>Data Source</a>",
chartOpts=list(scatcolors=tc$color,
rectcolor = "#ffffff",
cortitle="Correlation Matrix",
scattitle="Scatterplot"
)))
